{"version":3,"file":"signIn.js","sources":["../../../../../../src/machines/authenticator/actors/signIn.ts"],"sourcesContent":[null],"names":["signInActor","_a","services","createMachine","initial","id","states","init","always","target","signIn","exit","edit","entry","on","SUBMIT","actions","CHANGE","FEDERATED_SIGN_IN","federatedSignIn","tags","invoke","src","onError","submit","onDone","cond","verifying","resolved","rejected","confirmSignIn","SIGN_IN","forceNewPassword","type","validation","pending","valid","invalid","BLUR","idle","validate","setupTOTP","verifyUser","SKIP","confirmVerifyUser","data","context","user","event","intent","redirectIntent","authAttributes","clearAttributeToVerify","clearChallengeName","clearRequiredAttributes","clearError","clearFormValues","clearTouched","clearUnverifiedAttributes","clearValidationError","handleInput","handleSubmit","handleBlur","parsePhoneNumber","setChallengeName","setConfirmResetPasswordIntent","setConfirmSignUpIntent","setRequiredAttributes","setCredentials","setFieldErrors","setRemoteError","setUnverifiedAttributes","setUser","setUsernameAuthAttributes","sendUpdate","guards","shouldConfirmSignIn","_","challengeName","get","AuthChallengeNames","SMS_MFA","SOFTWARE_TOKEN_MFA","includes","shouldRedirectToConfirmSignUp","code","shouldRedirectToConfirmResetPassword","shouldSetupTOTP","MFA_SETUP","shouldForceChangePassword","NEW_PASSWORD_REQUIRED","shouldRequestVerification","unverified","verified","isEmpty","formValues","username","password","handleSignIn","_b","mfaType","handleConfirmSignIn","sent","Auth","currentAuthenticatedUser","phone_number","country_code","rest","__rest","phoneNumberWithCountryCode","concat","replace","completeNewPassword","verifyTotpToken","confirmation_code","provider","checkVerifiedContact","verifiedContact","unverifiedAttr","verifyCurrentUserAttribute","result","attributeToVerify","verifyCurrentUserAttributeSubmit","validateFields","runValidators","touched","passwordSettings","defaultServices","validateConfirmPassword"],"mappings":"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"}